# 网络-4.1-TCP三次挥手四次握手面试题

![img](https://img-blog.csdnimg.cn/1310bf5ed78e4c8186481c47719e0793.png)



# TCP 基本认识

## TCP 头格式

~~源操作数 源地址 目的操作数 目的地址~~

源端口号 目的端口号

序列号 保证包的顺序

确认~~序列号~~**应答号** 确认包的到达

首部长度 保留 状态 SYN FIN ACK  **RST**  **窗口大小** 流量控制

校验和 。。。。。

## 为什么需要TCP协议？TCP工作在哪一层？

TCP协议 可靠稳定的连接，辅助ip

工作在传输层

//----专业----

IP层是不可靠的，它不保证网络包的交付，也不保证网络包的按序交付，和交付网络包中数据的完整度

## 什么是TCP？

**面向连接的、可靠的、基于字节流**的传输控制协议

## 什么是 TCP 连接

连接：**用于保证可靠性和流量控制维护的某些状态信息，这些信息的组合，**客户端和服务器端互相确立Socket、序列号、**窗口大小**。

TCP连接就是需要服务器和客户端确认Socket、序列号和窗口大小这三样信息。

## 如何唯一确定一个 TCP 连接？

三次握手？错的

四元组 目的端口、目的操作数、源端口、源操作数

## 有一个ip的服务器监听了一个端口，它的TCP的最大连接数是多少？

理论上：客户端IP数 * 端口

**实际影响因素：文件描述符数量（系统级、用户级、进程级）**

​							**内存限制**

## UDP 和 TCP 的区别？分别的应用场景？

1. 可靠性方面
2. 连接
3. 服务对象
4. 拥塞控制、流量控制
5. 首部开销
6. 传输方式
7. 分片不同

应用场景：

TCP ：~~重要的文件传输~~（太简略，需要具体的文件类型）

UDP：数据比较少，音媒体数据传输、**广播通信**

## 首部字段

为什么UDP头部没有首部长度字段，而TCP头部有首部长度字段？

~~因为TCP需要，用于表示传输包的一些信息~~

## 包长度

为什么 UDP 头部有「包长度」字段，而 TCP 头部则没有「包长度」字段呢？

TCP可以计算出包长度

UDP直接给出

### TCP 和 UDP 可以使用同一个端口吗？

可以的，使用的内核模块不同（太简单）

在什么地方使用端口？在传输层使用端口来**进行识别同一计算机中同时通信的不同应用程序。**数据链路层使用MAC来寻找局域网中的主机，在网络层使用IP来寻找网络中互联的主机或者路由器**

端口的作用？为了区分同一个主机上不同应用程序的数据包。

当主机接收到数据包后的处理过程？



# TCP 连接建立





# TCP连接断开





# Socket 编程

